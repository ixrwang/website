<div id="nav">
<div class="topnav">
<ul id="menu" class="menu">
<li><a href="${base}/"><@spring.message "index"/></a></li>
<li><a><@spring.message "language"/></a>
<ul class="sub-menu">
<li><a id="language_zh_CN" href="javascript:void()"><@spring.message "zh_CN"/></a>
<li><a id="language_en_US" href="javascript:void()"><@spring.message "en_US"/></a>
</ul></li>
<li><a><@spring.message "theme"/></a>
<ul class="sub-menu">
<li><a id="theme_default" href="javascript:void()"><@spring.message "default"/></a></a>
<li><a id="theme_blue" href="javascript:void()"><@spring.message "blue"/></a></a>
</ul></li>
<#if Session['USER_LOGIN']?exists>
<#assign nickname>${USER_LOGIN.nickname}</#assign>
<li><a href="${base}/logout"><@spring.message "logout"/></a></li>
<#else>
<#assign nickname></#assign>
<li><a href="${base}/oauth/qq_login"><@spring.message "login"/></a></li>
</#if>
</ul>
<div class="search">
<div class="search_site addapted" style="overflow: hidden;">
<form id="searchform" method="get" action="${base}/" onsubmit="return false;">
<input type="submit" id="searchsubmit" class="button">
<input type="text" id="s" name="uid" value="${nickname}">
</form>
</div>
</div>
</div>
</div>
<script>
(function(menu){
menu.find('li').each(function(idx,obj){
    $(obj).hover(function(){
        $(this).find('ul').show();
    },function(){
        $(this).find('ul').hide();
    });
});
})($('#menu'));
(function(items){
$(items).each(function(idx,obj){
    obj[0].click(function(){
        setCookie(obj[1],obj[2]);
        window.location.reload();
    });
});
})([[$('#language_zh_CN'),'clientlanguage','zh_CN'],
[$('#language_en_US'),'clientlanguage','en_US'],
[$('#theme_default'),'clienttheme','default'],
[$('#theme_blue'),'clienttheme','blue']]);
</script>
